<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Resultados del Procesamiento</title>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>

<body class="bg-light">

<div class="container mt-5">

    <h2 class="text-center mb-4">Resultados del Procesamiento</h2>

    <!-- Mensaje general -->
    <div class="alert alert-info">
        {{ mensaje }}
    </div>

    <!-- TABLA ORIGINAL -->
    <h4>Datos Originales</h4>
    <div class="table-responsive">
        {{ tabla_original|safe }}
    </div>

    <hr>

    <!-- TABLA FINAL -->
    <h4>Datos Procesados (Resultado Final)</h4>
    <div class="table-responsive">
        {{ tabla_imputada|safe }}
    </div>


    <!-- TABLAS EXTRA (Procesar TODO) -->
    {% if tablas_extra %}
    <hr>
    <h3 class="mt-4">Resultados por Fase</h3>

    <!-- IMPUTACIÓN -->
    <h4 class="mt-4">1. Imputación Inteligente</h4>
    <div class="table-responsive">
        {{ tablas_extra.imputado|safe }}
    </div>

    <!-- NORMALIZACIÓN -->
    <h4 class="mt-4">2. Normalización</h4>
    <div class="table-responsive">
        {{ tablas_extra.normalizado|safe }}
    </div>

    <!-- DISCRETIZACIÓN -->
    <h4 class="mt-4">3. Discretización</h4>
    <div class="table-responsive">
        {{ tablas_extra.discreto|safe }}
    </div>
    {% endif %}


    <!-- SECCIÓN DEL ÁRBOL -->
    {% if arbol_info %}
    <hr>
    <h3 class="mt-4">Árbol de Decisión</h3>

    {% if arbol_info.accuracy %}
        <p><strong>Accuracy:</strong> {{ arbol_info.accuracy }}</p>
    {% endif %}

    {% if arbol_info.report %}
        <h4>Reporte de Clasificación</h4>
        <pre class="bg-dark text-white p-3 rounded">
{{ arbol_info.report }}
        </pre>
    {% endif %}

    {% if arbol_info.rules %}
        <h4>Reglas del Árbol</h4>
        <pre class="bg-dark text-white p-3 rounded">
{{ arbol_info.rules }}
        </pre>
    {% endif %}
    {% endif %}

    <!-- BOTONES FINALES -->
    <div class="mt-4 text-center">
        <a href="{{ download_link }}" class="btn btn-success">Descargar CSV Procesado</a>
        <a href="/" class="btn btn-secondary">Volver</a>
    </div>

</div>

</body>
</html>
